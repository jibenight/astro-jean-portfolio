---
import { Image } from 'astro:assets';
import closeImage from '../assets/images/cancel.png';
const { width = 32, height = 32, onClick } = Astro.props;
---

<button
  class='close'
  type='button'
  aria-label='Fermer la section'
  onClick={onClick}
>
  <Image
    src={closeImage}
    alt='bouton de fermeture'
    width={width}
    height={height}
    format='png'
    class='close-icon'
  />
</button>

<style>
  .close {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    border: 1px solid rgba(0, 0, 0, 0.06);
    background: rgba(255, 255, 255, 0.9);
    box-shadow:
      0 10px 26px rgba(0, 0, 0, 0.18),
      0 0 0 1px rgba(255, 255, 255, 0.7);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
        transition:
            transform 0.24s cubic-bezier(0.22, 1, 0.36, 1),
            box-shadow 0.24s ease,
            background 0.2s ease,
            filter 0.24s ease;
        backdrop-filter: blur(10px);
        animation: popIn 0.4s ease-out;
        position: fixed;
        overflow: hidden;
    }

  .close::after {
    content: '';
    position: absolute;
    inset: -6px;
    border-radius: 50%;
        border: 2px solid rgba(13, 138, 232, 0.2);
        opacity: 0;
        transform: scale(0.9);
        transition:
            opacity 0.3s ease,
            transform 0.3s cubic-bezier(0.22, 1, 0.36, 1);
        pointer-events: none;
    }

  .close:hover,
  .close:focus-visible {
        transform: translateY(-2px) scale(1.03);
        box-shadow:
            0 16px 32px rgba(0, 0, 0, 0.2),
            0 0 0 2px rgba(13, 138, 232, 0.2),
            0 0 0 14px rgba(13, 138, 232, 0.08);
        background: rgba(255, 255, 255, 0.98);
        filter: saturate(1.05);
    }

    .close:hover::after,
    .close:focus-visible::after {
        opacity: 1;
        transform: scale(1.06);
        animation: ringPulse 1.4s ease-out;
    }

  .close:active {
    transform: translateY(0) scale(0.98);
  }

  .close:focus-visible {
    outline: none;
    box-shadow:
      0 16px 32px rgba(0, 0, 0, 0.2),
      0 0 0 3px rgba(13, 138, 232, 0.35);
  }

  .close-icon {
    width: 28px;
    height: 28px;
        transform: scale(1);
        transition: transform 0.24s cubic-bezier(0.22, 1, 0.36, 1);
        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15));
    }

    .close:hover .close-icon,
    .close:focus-visible .close-icon {
        transform: scale(1.05);
    }

    @keyframes popIn {
        from {
            opacity: 0;
            transform: translateY(-6px) scale(0.96);
        }
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    @keyframes ringPulse {
        0% {
            transform: scale(1.06);
            opacity: 0.15;
        }
        70% {
            transform: scale(1.12);
            opacity: 0.35;
        }
        100% {
            transform: scale(1.15);
            opacity: 0;
        }
    }
</style>
